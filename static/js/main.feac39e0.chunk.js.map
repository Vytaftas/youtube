{"version":3,"sources":["useSearch.js","video.js","single.js","Main.js","Nav.js","App.js","index.js"],"names":["useSearch","query","page","api_key","api_url","useState","videos","setVideos","info","setInfo","loading","setLoading","error","setError","hasMore","setHasMore","useEffect","cancel","axios","method","url","params","q","key","maxResults","pageToken","cancelToken","CancelToken","c","then","res","prevVideos","Set","data","items","nextPageToken","pageInfo","totalResults","nextPageToken0","catch","e","isCancel","Video","className","title","width","height","src","frameBorder","allow","allowFullScreen","Single","stuff","videoTitle","videoChannelTitle","videoThumbnail","changeVideo","randomStuff","vidId","onClick","alt","Main","lastItemElementRef","document","querySelector","target","randViews","Math","floor","random","rnd","rndStuff","length","randDay","toFixed","replace","etag","map","video","index","ref","snippet","thumbnails","high","id","videoId","channelTitle","Nav","getQuery","checkInput","search","onChange","value","type","placeholder","App","setQuery","setSearch","setPage","observer","useRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","preventDefault","RegExp","test","split","isValid","err","classList","add","setTimeout","remove","errorPopup","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.feac39e0.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst useSearch = (query, page) => {\r\n  const api_key = \"AIzaSyCuq80St7U_8Mso-pg6ig3Bvmh9tlksDPg\";\r\n  const api_url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&q=${query}&key=${api_key}`;\r\n\r\n  const [videos, setVideos] = useState([]);\r\n  const [info, setInfo] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setVideos([]);\r\n  }, [query]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(false);\r\n\r\n    let cancel;\r\n    axios({\r\n      method: \"GET\",\r\n      url: `${api_url}`,\r\n      params: {\r\n        q: query,\r\n        key: api_key,\r\n        maxResults: 20,\r\n        pageToken: page,\r\n      },\r\n      cancelToken: new axios.CancelToken((c) => (cancel = c)),\r\n    })\r\n      .then((res) => {\r\n        setVideos((prevVideos) => {\r\n          return [...new Set([...prevVideos, ...res.data.items])];\r\n        });\r\n        setInfo([res.data.nextPageToken, res.data.pageInfo.totalResults]);\r\n        setHasMore(res.data.nextPageToken);\r\n        if (res.data.nextPageToken0) {\r\n        } else {\r\n        }\r\n        setLoading(false);\r\n      })\r\n      .catch((e) => {\r\n        if (axios.isCancel(e)) return;\r\n        setError(true);\r\n      });\r\n    return () => cancel();\r\n  }, [query, page]);\r\n  return { loading, error, videos, hasMore, info };\r\n};\r\nexport default useSearch;\r\n","import React from \"react\";\r\n\r\nconst Video = () => {\r\n  return (\r\n    <div className=\"main-video-src\">\r\n      <iframe\r\n        className=\"main-video-src-yt\"\r\n        title=\"video\"\r\n        width=\"560\"\r\n        height=\"315\"\r\n        src=\"https://www.youtube.com/embed/YeD_HU4vA0o\"\r\n        frameBorder=\"0\"\r\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n        allowFullScreen\r\n      ></iframe>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Video;\r\n","import React from \"react\";\r\n\r\nconst Single = ({ stuff }) => {\r\n  const [\r\n    videoTitle,\r\n    videoChannelTitle,\r\n    videoThumbnail,\r\n    changeVideo,\r\n    randomStuff,\r\n    vidId,\r\n  ] = [...stuff];\r\n\r\n  return (\r\n    <div className=\"main-results-single\">\r\n      <div className=\"main-results-single-thumbnail\">\r\n        <img\r\n          onClick={changeVideo}\r\n          className=\"main-results-single-thumbnail-src\"\r\n          src={videoThumbnail}\r\n          alt={vidId}\r\n        />\r\n      </div>\r\n      <div className=\"main-results-single-info\">\r\n        <p className=\"main-results-single-info-title\">{videoTitle}</p>\r\n        <p className=\"main-results-single-info-channel\">{videoChannelTitle}</p>\r\n        <p className=\"main-results-single-info-views\">{randomStuff()}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Single;\r\n","import React from \"react\";\r\nimport Video from \"./video\";\r\nimport Single from \"./single\";\r\n\r\nconst Main = ({ stuff }) => {\r\n  const [lastItemElementRef, videos, loading, error] = [...stuff];\r\n\r\n  const changeVideo = (e) => {\r\n    const vid = document.querySelector(\".main-video-src-yt\");\r\n    vid.src = `https://www.youtube.com/embed/${e.target.alt}`;\r\n  };\r\n\r\n  const randomStuff = () => {\r\n    let randViews = Math.floor(Math.random() * 9999999);\r\n    const rnd = [\"days\", \"months\", \"years\"];\r\n    const rndStuff = rnd[Math.floor(Math.random() * rnd.length)];\r\n    let randDay = Math.floor(Math.random() * 10);\r\n\r\n    if (randViews === 0) {\r\n      randViews = 1;\r\n    }\r\n    if (randDay === 0) {\r\n      randDay = 1;\r\n    }\r\n\r\n    return (\r\n      randViews\r\n        .toFixed(2)\r\n        .replace(/\\d(?=(\\d{3})+\\.)/g, \"$&,\")\r\n        .replace(\".\", \",\") + ` views ${randDay} ${rndStuff} ago`\r\n    );\r\n  };\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <div className=\"main-video\">\r\n        <Video key={videos.etag} />;\r\n      </div>\r\n      <div className=\"main-results\">\r\n        {videos.map((video, index) => {\r\n          if (videos.length === index + 1) {\r\n            return (\r\n              <div ref={lastItemElementRef} className=\"main-results-single\">\r\n                <div className=\"main-results-single-thumbnail\">\r\n                  <img\r\n                    onClick={changeVideo}\r\n                    className=\"main-results-single-thumbnail-src\"\r\n                    src={video.snippet.thumbnails.high.url}\r\n                    alt={video.id.videoId}\r\n                  />\r\n                </div>\r\n                <div className=\"main-results-single-info\">\r\n                  <p className=\"main-results-single-info-title\">\r\n                    {video.snippet.title}\r\n                  </p>\r\n                  <p className=\"main-results-single-info-channel\">\r\n                    {video.snippet.channelTitle}\r\n                  </p>\r\n                  <p className=\"main-results-single-info-views\">\r\n                    {randomStuff()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            );\r\n          } else {\r\n            return (\r\n              <Single\r\n                key={video.id.videoId}\r\n                stuff={[\r\n                  video.snippet.title,\r\n                  video.snippet.channelTitle,\r\n                  video.snippet.thumbnails.high.url,\r\n                  changeVideo,\r\n                  randomStuff,\r\n                  video.id.videoId,\r\n                ]}\r\n              />\r\n            );\r\n          }\r\n        })}\r\n        {loading && (\r\n          <div className=\"main-results-single\">\r\n            <div className=\"main-results-single-thumbnail\">\r\n              <img\r\n                className=\"main-results-single-thumbnail-src\"\r\n                src=\"https://upload.wikimedia.org/wikipedia/commons/b/b9/Youtube_loading_symbol_1_(wobbly).gif\"\r\n                alt=\"Loading\"\r\n              />\r\n            </div>\r\n            <div className=\"main-results-single-info\">\r\n              <p className=\"main-results-single-info-title\">LOADING</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"main-results-single\">\r\n            <div className=\"main-results-single-thumbnail\">\r\n              <img\r\n                className=\"main-results-single-thumbnail-src\"\r\n                src=\"https://media2.giphy.com/media/TqiwHbFBaZ4ti/giphy.gif?cid=ecf05e47j8fk8uy0zm6jth0bcyynwiam7x349v6vnirn2ufg&rid=giphy.gif\r\n               \"\r\n                alt=\"Error\"\r\n              />\r\n            </div>\r\n            <div className=\"main-results-single-info\">\r\n              <p className=\"main-results-single-info-title\">ERROR!</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\n\r\nconst Nav = ({ stuff }) => {\r\n  const [getQuery, checkInput, search] = [...stuff];\r\n\r\n  return (\r\n    <nav className=\"nav\">\r\n      <form className=\"search-form\">\r\n        <input\r\n          onChange={checkInput}\r\n          value={search}\r\n          className=\"search-form-text\"\r\n          type=\"text\"\r\n          placeholder=\"Search..\"\r\n        />\r\n        <button onClick={getQuery} className=\"search-form-btn\">\r\n          <i className=\"fas fa-search\"></i>\r\n        </button>\r\n        <div className=\"error-popup\">\r\n          Letters and Numbers only, 19 characters or less..\r\n        </div>\r\n      </form>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Nav;\r\n","import React, { useRef, useState, useCallback } from \"react\";\nimport useSearch from \"./useSearch\";\nimport Main from \"./Main\";\nimport Nav from \"./Nav\";\n\nimport \"./index.css\";\n\nconst App = () => {\n  const [query, setQuery] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [page, setPage] = useState(\"\");\n\n  const { loading, error, videos, hasMore, info } = useSearch(query, page);\n\n  const observer = useRef();\n\n  const lastItemElementRef = useCallback(\n    (node) => {\n      if (loading) return;\n      if (observer.current) observer.current.disconnect();\n\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting && hasMore) {\n          setPage(info[0]);\n        }\n      });\n      if (node) observer.current.observe(node);\n    },\n    [loading, hasMore]\n  );\n\n  const isValid = () => {\n    var regexp = new RegExp(/^[a-zA-Z0-9 ]+$/);\n    if (!regexp.test(search)) {\n      return false;\n    }\n    for (const word of search.split(\" \")) {\n      if (word.length > 19) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  const errorPopup = () => {\n    const err = document.querySelector(\".error-popup\");\n    err.classList.add(\"err\");\n    setTimeout(() => {\n      err.classList.remove(\"err\");\n    }, 2000);\n  };\n\n  const getQuery = (e) => {\n    e.preventDefault();\n    if (isValid()) {\n      setQuery(search);\n      setPage(\"\");\n    } else {\n      errorPopup();\n      return;\n    }\n  };\n\n  const checkInput = (e) => {\n    setSearch(e.target.value);\n  };\n\n  return (\n    <div className=\"App\">\n      <Nav stuff={[getQuery, checkInput, search, videos]} />\n      <Main stuff={[lastItemElementRef, videos, loading, error]} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}